<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typewriter Poetry Map</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier Prime', monospace;
            background-color: #f5f1e3;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d4c4a8' fill-opacity='0.15' fill-rule='evenodd'/%3E%3C/svg%3E");
            color: #2c2416;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Typewriter paper effect */
        .paper-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            background: linear-gradient(to bottom, transparent 95%, rgba(0,0,0,0.03) 100%);
            z-index: 1000;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Header with typewriter aesthetic */
        .typewriter-header {
            text-align: center;
            padding: 30px 0 40px;
            margin-bottom: 20px;
            position: relative;
        }

        .typewriter-header h1 {
            font-family: 'Special Elite', cursive;
            font-size: 3.5rem;
            color: #2c2416;
            letter-spacing: 2px;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
            margin-bottom: 15px;
        }

        .typewriter-header h1:after {
            content: '▮';
            animation: blink 1s infinite;
            margin-left: 5px;
            color: #8b7355;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .typewriter-header p {
            font-size: 1.1rem;
            color: #5d4c37;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
            border-top: 1px dashed #8b7355;
            padding-top: 15px;
            font-style: italic;
        }

        /* Typewriter ribbon */
        .ribbon {
            height: 4px;
            background: repeating-linear-gradient(90deg, 
                #8b7355, #8b7355 10px, 
                #d4c4a8 10px, #d4c4a8 20px);
            margin: 10px 0 30px;
            border-radius: 2px;
        }

        /* Minimal controls */
        .minimal-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .type-btn {
            background: transparent;
            color: #5d4c37;
            border: 1px solid #8b7355;
            padding: 8px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier Prime', monospace;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .type-btn:hover {
            background-color: rgba(139, 115, 85, 0.1);
        }

        .type-btn.active {
            background-color: #8b7355;
            color: #f5f1e3;
        }

        /* Main content area */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
            position: relative;
        }

        /* Mind map container */
        .mindmap-container {
            width: 100%;
            height: 65vh;
            min-height: 550px;
            background-color: #fefcf5;
            border: 1px solid #d4c4a8;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.05),
                inset 0 1px 0 rgba(255,255,255,0.8);
            position: relative;
            overflow: hidden;
        }

        .mindmap-paper {
            width: 100%;
            height: 100%;
            position: relative;
            background-color: #fefcf5;
        }

        /* Typewriter nodes */
        .node {
            position: absolute;
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 10;
            text-align: center;
            padding: 5px;
            font-family: 'Courier Prime', monospace;
        }

        .node:hover {
            z-index: 100;
        }

        .node-core {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #2c2416;
            color: #f5f1e3;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 2px solid #8b7355;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-weight: bold;
            font-size: 1rem;
        }

        .node-theme {
            width: 85px;
            height: 85px;
            border-radius: 50%;
            background-color: #f5f1e3;
            color: #2c2416;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 1px solid #8b7355;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            font-size: 0.85rem;
        }

        .node-poem {
            width: 70px;
            height: 70px;
            border-radius: 3px;
            background-color: #fefcf5;
            color: #2c2416;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 1px solid #b8a98d;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .node-poem:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            background-color: #fff;
        }

        .node i {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .node-poem i {
            font-size: 1rem;
        }

        /* Typewriter connection lines */
        .connection {
            position: absolute;
            background-color: #8b7355;
            transform-origin: 0 0;
            height: 1px;
            z-index: 1;
            opacity: 0.6;
        }

        /* Poem display - typewriter paper */
        .poem-display {
            background-color: #fefcf5;
            border: 1px solid #d4c4a8;
            border-top: 15px solid #8b7355;
            padding: 30px;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.05),
                inset 0 1px 0 rgba(255,255,255,0.8);
            position: relative;
            min-height: 250px;
        }

        .poem-display:before {
            content: "";
            position: absolute;
            top: -15px;
            left: 0;
            right: 0;
            height: 15px;
            background: repeating-linear-gradient(90deg, 
                transparent, transparent 10px, 
                #f5f1e3 10px, #f5f1e3 20px);
        }

        .poem-title {
            font-family: 'Special Elite', cursive;
            font-size: 1.8rem;
            color: #2c2416;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #d4c4a8;
            letter-spacing: 1px;
        }

        .poem-content {
            font-family: 'Courier Prime', monospace;
            line-height: 1.8;
            font-size: 1.05rem;
            color: #3a3225;
            white-space: pre-line;
        }

        .poem-meta {
            font-size: 0.9rem;
            color: #8b7355;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed #d4c4a8;
            font-style: italic;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #8b7355;
            font-style: italic;
        }

        .empty-state i {
            font-size: 2.5rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* Footer with typewriter key details */
        .typewriter-footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #8b7355;
            font-size: 0.85rem;
            border-top: 1px dashed #d4c4a8;
            letter-spacing: 0.5px;
        }

        .key-hint {
            display: inline-block;
            background-color: #f5f1e3;
            border: 1px solid #d4c4a8;
            padding: 3px 8px;
            margin: 0 5px;
            border-radius: 3px;
            font-family: 'Courier Prime', monospace;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .typewriter-header h1 {
                font-size: 2.5rem;
            }
            
            .mindmap-container {
                height: 50vh;
                min-height: 400px;
            }
            
            .minimal-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .type-btn {
                width: 80%;
            }
        }
    </style>
</head>
<body>
    <div class="paper-overlay"></div>
    
    <div class="container">
        <header class="typewriter-header">
            <h1>POETRY MAP</h1>
            <p>A typewriter-inspired network of verses and themes. Click on any node to explore connections.</p>
        </header>
        
        <div class="ribbon"></div>

        <div class="minimal-controls">
            <button class="type-btn active" data-theme="all">ALL POEMS</button>
            <button class="type-btn" data-theme="love">LOVE</button>
            <button class="type-btn" data-theme="nature">NATURE</button>
            <button class="type-btn" data-theme="introspection">REFLECTION</button>
            <button class="type-btn" data-theme="melancholy">LONGING</button>
        </div>

        <div class="main-content">
            <div class="mindmap-container">
                <div class="mindmap-paper" id="mindmap"></div>
            </div>

            <div class="poem-display">
                <div id="poem-display-content">
                    <div class="empty-state">
                        <i class="fas fa-keyboard"></i>
                        <p>SELECT A POEM FROM THE MAP TO DISPLAY IT HERE</p>
                        <p style="margin-top: 10px; font-size: 0.9rem;">Each connection represents thematic relationships between verses</p>
                    </div>
                </div>
            </div>
        </div>

        <footer class="typewriter-footer">
            <p>POETRY MAP <span class="key-hint">CLICK</span> NODES TO EXPLORE • <span class="key-hint">CLICK</span> THEMES TO FILTER</p>
            <p style="margin-top: 10px;">AN INTERACTIVE TYPEWRITER-STYLE NETWORK</p>
        </footer>
    </div>

    <script>
        // Poetry data
        const poems = [
            {
                id: 1,
                title: "WHISPERS OF DAWN",
                theme: "nature",
                content: `The sun ascends with gentle grace,
A golden hue on nature's face.
The morning dew on petals glistens,
As day awakens, night now listens.

The birdsong rises, sweet and clear,
Dispelling every lingering fear.
A new beginning, fresh and pure,
In dawn's embrace we feel secure.`,
                color: "#8b7355"
            },
            {
                id: 2,
                title: "ECHOES OF YOU",
                theme: "love",
                content: `Your memory lingers in the air,
A scent of roses, soft and rare.
In quiet moments, you appear,
A presence that I hold so dear.

Though time may pass and seasons change,
My feelings for you never range.
You're in the stars, the moon, the sea,
Forever part of what's in me.`,
                color: "#8b7355"
            },
            {
                id: 3,
                title: "SILENT CONVERSATIONS",
                theme: "introspection",
                content: `Within the quiet of my mind,
A universe of thoughts I find.
Conversations with my soul,
Trying to become whole.

Questions asked without a sound,
On silent battlegrounds I'm found.
Seeking truth in introspection,
Finding my own direction.`,
                color: "#8b7355"
            },
            {
                id: 4,
                title: "AUTUMN'S LAMENT",
                theme: "melancholy",
                content: `The leaves descend in red and gold,
A story of the year now told.
The air grows crisp, the light grows thin,
As autumn's symphony begins.

A melancholy, sweet refrain,
Of summer's loss and winter's gain.
The beauty of a slow goodbye,
Beneath a fading autumn sky.`,
                color: "#8b7355"
            },
            {
                id: 5,
                title: "OCEAN'S EMBRACE",
                theme: "nature",
                content: `The ocean whispers ancient tales,
In rhythmic waves and salty gales.
A timeless dance of ebb and flow,
Where secrets of the deep waters go.

Its vast expanse both frees and binds,
A home for hearts and searching minds.
In every crashing wave I see,
A reflection of eternity.`,
                color: "#8b7355"
            },
            {
                id: 6,
                title: "UNSPOKEN WORDS",
                theme: "love",
                content: `A language formed without a sound,
In glances, touches, common ground.
The quiet spaces between words,
Where meaning flies like startled birds.

All that I've longed but never said,
Lingers in my heart instead.
In silence, love finds its true voice,
Making the most difficult choice.`,
                color: "#8b7355"
            },
            {
                id: 7,
                title: "SHADOW AND LIGHT",
                theme: "introspection",
                content: `Two sides of one imperfect whole,
The hidden and the seen, my soul.
The darkness where my fears reside,
The light where all my hopes abide.

I walk the line between the two,
Discovering what is false and true.
In shadows, lessons I am learning,
Toward the light, my spirit turning.`,
                color: "#8b7355"
            },
            {
                id: 8,
                title: "FADING EMBERS",
                theme: "melancholy",
                content: `The dying glow of what once burned,
For lessons learned and bridges turned.
The cooling ashes of desire,
The embers of a former fire.

Yet in the grey, a warmth remains,
A memory that softly stains.
What once was bright now fades to grey,
But taught my heart to find its way.`,
                color: "#8b7355"
            }
        ];

        // Themes data
        const themes = [
            { id: "love", name: "LOVE", icon: "fas fa-heart" },
            { id: "nature", name: "NATURE", icon: "fas fa-leaf" },
            { id: "introspection", name: "REFLECTION", icon: "fas fa-brain" },
            { id: "melancholy", name: "LONGING", icon: "fas fa-cloud" }
        ];

        // DOM elements
        const mindmapEl = document.getElementById('mindmap');
        const poemDisplayContent = document.getElementById('poem-display-content');
        const themeButtons = document.querySelectorAll('.type-btn');
        
        // Current active theme
        let activeTheme = 'all';
        
        // Typewriter effect variables
        let isTyping = false;
        let currentPoemDisplay = '';
        
        // Initialize mind map
        function initMindMap() {
            // Clear previous mind map
            mindmapEl.innerHTML = '';
            
            // Create central node
            const centerX = mindmapEl.clientWidth / 2;
            const centerY = mindmapEl.clientHeight / 2;
            
            createNode('center', centerX, centerY, 'POEMS', 'fas fa-feather-alt', 'node-core');
            
            // Create theme nodes
            const themeRadius = Math.min(mindmapEl.clientWidth, mindmapEl.clientHeight) * 0.3;
            const themeAngleStep = (2 * Math.PI) / themes.length;
            
            themes.forEach((theme, index) => {
                const angle = index * themeAngleStep;
                const x = centerX + themeRadius * Math.cos(angle);
                const y = centerY + themeRadius * Math.sin(angle);
                
                createNode(theme.id, x, y, theme.name, theme.icon, 'node-theme');
                
                // Connect theme to center
                createConnection(centerX, centerY, x, y);
                
                // Create poem nodes for this theme
                const themePoems = poems.filter(poem => poem.theme === theme.id);
                const poemRadius = themeRadius * 0.5;
                const poemAngleStep = (2 * Math.PI) / themePoems.length;
                
                themePoems.forEach((poem, poemIndex) => {
                    const poemAngle = angle + (poemIndex - (themePoems.length-1)/2) * poemAngleStep * 0.7;
                    const poemX = x + poemRadius * Math.cos(poemAngle);
                    const poemY = y + poemRadius * Math.sin(poemAngle);
                    
                    createNode(`poem-${poem.id}`, poemX, poemY, poem.title, 'fas fa-file-alt', 'node-poem');
                    
                    // Connect poem to theme
                    createConnection(x, y, poemX, poemY);
                });
            });
            
            // Add event listeners to nodes
            addNodeEventListeners();
        }
        
        // Create a node element
        function createNode(id, x, y, text, icon, className) {
            const node = document.createElement('div');
            node.id = id;
            node.className = `node ${className}`;
            node.style.left = `${x}px`;
            node.style.top = `${y}px`;
            
            node.innerHTML = `
                <i class="${icon}"></i>
                <span>${text}</span>
            `;
            
            mindmapEl.appendChild(node);
            
            // Adjust position to center the node
            const nodeWidth = node.offsetWidth;
            const nodeHeight = node.offsetHeight;
            node.style.left = `${x - nodeWidth/2}px`;
            node.style.top = `${y - nodeHeight/2}px`;
            
            return node;
        }
        
        // Create a connection line between two points
        function createConnection(x1, y1, x2, y2) {
            const connection = document.createElement('div');
            connection.className = 'connection';
            
            // Calculate distance and angle
            const dx = x2 - x1;
            const dy = y2 - y1;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            // Set connection styles
            connection.style.width = `${distance}px`;
            connection.style.left = `${x1}px`;
            connection.style.top = `${y1}px`;
            connection.style.transform = `rotate(${angle}deg)`;
            
            mindmapEl.appendChild(connection);
        }
        
        // Typewriter effect for displaying poems
        function typewriterEffect(text, element, speed = 30) {
            if (isTyping) return;
            
            isTyping = true;
            element.innerHTML = '';
            let i = 0;
            currentPoemDisplay = '';
            
            function typeWriter() {
                if (i < text.length) {
                    currentPoemDisplay += text.charAt(i);
                    element.innerHTML = currentPoemDisplay;
                    i++;
                    setTimeout(typeWriter, speed);
                } else {
                    isTyping = false;
                }
            }
            
            typeWriter();
        }
        
        // Add event listeners to nodes
        function addNodeEventListeners() {
            const nodes = document.querySelectorAll('.node');
            
            nodes.forEach(node => {
                node.addEventListener('click', function() {
                    const nodeId = this.id;
                    
                    // Remove active class from all nodes
                    nodes.forEach(n => n.classList.remove('active'));
                    
                    // Add active class to clicked node
                    this.classList.add('active');
                    
                    // Show content based on node type
                    if (nodeId.startsWith('poem-')) {
                        const poemId = parseInt(nodeId.split('-')[1]);
                        const poem = poems.find(p => p.id === poemId);
                        
                        if (poem) {
                            const theme = themes.find(t => t.id === poem.theme);
                            
                            // Prepare poem display with typewriter effect
                            const displayHTML = `
                                <div class="poem-title">${poem.title}</div>
                                <div class="poem-content" id="typing-area"></div>
                                <div class="poem-meta">THEME: ${theme ? theme.name : 'GENERAL'}</div>
                            `;
                            
                            poemDisplayContent.innerHTML = displayHTML;
                            
                            // Use typewriter effect for the poem content
                            const typingArea = document.getElementById('typing-area');
                            typewriterEffect(poem.content, typingArea, 40);
                        }
                    } else if (nodeId === 'center') {
                        const displayHTML = `
                            <div class="poem-title">POETRY MAP</div>
                            <div class="poem-content">
                                <p>A network of ${poems.length} poems organized around ${themes.length} central themes.</p>
                                <p style="margin-top: 15px;">Each connection represents the relationship between poems and their thematic elements.</p>
                                <p style="margin-top: 15px;">Click on any poem node to read it with a typewriter effect.</p>
                            </div>
                            <div class="poem-meta">AN INTERACTIVE TYPEWRITER-STYLE NETWORK</div>
                        `;
                        
                        poemDisplayContent.innerHTML = displayHTML;
                    } else {
                        // It's a theme node
                        const theme = themes.find(t => t.id === nodeId);
                        if (theme) {
                            const themePoems = poems.filter(poem => poem.theme === theme.id);
                            
                            let poemsHTML = `<p>This theme includes ${themePoems.length} poems exploring ${theme.name.toLowerCase()}.</p>`;
                            poemsHTML += '<div style="margin-top: 20px;">';
                            themePoems.forEach(poem => {
                                poemsHTML += `<div style="margin-bottom: 10px; padding-left: 10px; border-left: 2px solid #d4c4a8;">`;
                                poemsHTML += `<strong>${poem.title}</strong> - Click the node to read</div>`;
                            });
                            poemsHTML += '</div>';
                            
                            const displayHTML = `
                                <div class="poem-title">${theme.name} THEME</div>
                                <div class="poem-content">
                                    ${poemsHTML}
                                </div>
                                <div class="poem-meta">${themePoems.length} POEMS IN THIS CATEGORY</div>
                            `;
                            
                            poemDisplayContent.innerHTML = displayHTML;
                        }
                    }
                });
            });
        }
        
        // Filter poems by theme
        function filterByTheme(theme) {
            activeTheme = theme;
            
            // Update button states
            themeButtons.forEach(btn => {
                if (btn.dataset.theme === theme) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Hide/show nodes based on theme
            const allNodes = document.querySelectorAll('.node');
            const allConnections = document.querySelectorAll('.connection');
            
            if (theme === 'all') {
                // Show all nodes and connections
                allNodes.forEach(node => {
                    node.style.opacity = '1';
                    node.style.display = 'flex';
                });
                allConnections.forEach(conn => {
                    conn.style.opacity = '0.6';
                });
            } else {
                // Show only theme node and its poems
                allNodes.forEach(node => {
                    if (node.id === 'center' || node.id === theme || node.id.startsWith(`poem-`)) {
                        const poemId = node.id.startsWith('poem-') ? parseInt(node.id.split('-')[1]) : null;
                        const poem = poemId ? poems.find(p => p.id === poemId) : null;
                        
                        if (node.id === 'center' || node.id === theme || (poem && poem.theme === theme)) {
                            node.style.opacity = '1';
                            node.style.display = 'flex';
                        } else {
                            node.style.opacity = '0.3';
                            node.style.display = 'flex';
                        }
                    } else {
                        node.style.opacity = '0.3';
                        node.style.display = 'flex';
                    }
                });
                
                // Adjust connection visibility
                allConnections.forEach(conn => {
                    conn.style.opacity = '0.2';
                });
            }
            
            // If a theme node was clicked, show its content
            if (theme !== 'all') {
                const themeNode = document.getElementById(theme);
                if (themeNode) {
                    themeNode.click();
                }
            } else {
                // Show center node content
                const centerNode = document.getElementById('center');
                if (centerNode) {
                    centerNode.click();
                }
            }
        }
        
        // Add event listeners to theme buttons
        themeButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                const theme = this.dataset.theme;
                filterByTheme(theme);
            });
        });
        
        // Initialize the mind map when page loads
        window.addEventListener('load', initMindMap);
        
        // Reinitialize mind map on window resize
        window.addEventListener('resize', initMindMap);
    </script>
</body>
</html>
